# ğŸª Hajimi King - è‡ªåŠ¨åŒ– API å¯†é’¥å‘ç°ç³»ç»Ÿ

<div align="center">

[![License](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)
[![Python](https://img.shields.io/badge/python-3.11+-blue.svg)](https://www.python.org/downloads/)
[![Docker](https://img.shields.io/badge/docker-%230db7ed.svg?logo=docker&logoColor=white)](https://www.docker.com/)
[![Status](https://img.shields.io/badge/status-beta-yellow.svg)](https://github.com/yourusername/hajimi-king)

**äººäººéƒ½æ˜¯å“ˆåŸºç±³å¤§ç‹** ğŸ‘‘

[English](README.md) | [ç®€ä½“ä¸­æ–‡](#) | [å¿«é€Ÿå‚è€ƒ](QUICK_REFERENCE.md) | [æ–‡æ¡£](docs/) | [API å‚è€ƒ](docs/api/)

</div>

---

## ğŸ“‹ ç›®å½•

- [é¡¹ç›®æ¦‚è¿°](#-é¡¹ç›®æ¦‚è¿°)
- [æ ¸å¿ƒåŠŸèƒ½](#-æ ¸å¿ƒåŠŸèƒ½)
- [å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹)
- [å®‰è£…è¯´æ˜](#-å®‰è£…è¯´æ˜)
- [ä½¿ç”¨æ–¹æ³•](#-ä½¿ç”¨æ–¹æ³•)
- [é…ç½®è¯¦æƒ…](#-é…ç½®è¯¦æƒ…)
- [API æ–‡æ¡£](#-api-æ–‡æ¡£)
- [Docker éƒ¨ç½²](#-docker-éƒ¨ç½²)
- [æ•…éšœæ’é™¤](#-æ•…éšœæ’é™¤)
- [è´¡çŒ®æŒ‡å—](#-è´¡çŒ®æŒ‡å—)
- [æ›´æ–°æ—¥å¿—](#-æ›´æ–°æ—¥å¿—)
- [è®¸å¯è¯](#-è®¸å¯è¯)

---

## ğŸŒŸ é¡¹ç›®æ¦‚è¿°

Hajimi King æ˜¯ä¸€ä¸ªè‡ªåŠ¨åŒ–ç³»ç»Ÿï¼Œä¸“é—¨ç”¨äºä»å…¬å¼€ä»£ç ä»“åº“ä¸­å‘ç°å’ŒéªŒè¯ API å¯†é’¥ã€‚å®ƒåˆ©ç”¨ GitHub çš„æœç´¢ API æ¥æŸ¥æ‰¾å¯èƒ½æš´éœ²çš„å‡­æ®ï¼Œå¹¶ä½¿ç”¨å¹¶è¡Œå¤„ç†æŠ€æœ¯é«˜æ•ˆåœ°éªŒè¯å®ƒä»¬ã€‚

> âš ï¸ **å…è´£å£°æ˜**ï¼šæ­¤å·¥å…·ä»…ç”¨äºæ•™è‚²å’Œå®‰å…¨ç ”ç©¶ç›®çš„ã€‚è¯·å§‹ç»ˆéµå®ˆ API æœåŠ¡æ¡æ¬¾ï¼Œå¹¶è´Ÿè´£ä»»åœ°å¤„ç†å‘ç°çš„å¯†é’¥ã€‚

### ä¸»è¦ä¼˜åŠ¿

- ğŸ” **æ™ºèƒ½æœç´¢**ï¼šå…ˆè¿›çš„æŸ¥è¯¢ç­–ç•¥ï¼Œå®ç°é«˜æ•ˆå‘ç°
- âš¡ **å¹¶è¡ŒéªŒè¯**ï¼šå¤šçº¿ç¨‹éªŒè¯ï¼Œæä¾›é«˜æ€§èƒ½
- ğŸ”„ **å¢é‡æ‰«æ**ï¼šä»ä¸Šæ¬¡ä¸­æ–­çš„åœ°æ–¹ç»§ç»­
- ğŸ³ **Docker å°±ç»ª**ï¼šæ”¯æŒ Docker è½»æ¾éƒ¨ç½²
- ğŸ“Š **å¤–éƒ¨åŒæ­¥**ï¼šä¸è´Ÿè½½å‡è¡¡å™¨å’Œå¯†é’¥ç®¡ç†ç³»ç»Ÿé›†æˆ

---

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

### åŸºç¡€åŠŸèƒ½

1. **GitHub ä»£ç æœç´¢** - ä½¿ç”¨å¯è‡ªå®šä¹‰çš„æŸ¥è¯¢æœç´¢ API å¯†é’¥
2. **å¹¶è¡ŒéªŒè¯** - åŒæ—¶éªŒè¯å¤šä¸ªå¯†é’¥
3. **æ™ºèƒ½è¿‡æ»¤** - è‡ªåŠ¨è¿‡æ»¤æ–‡æ¡£å’Œæµ‹è¯•æ–‡ä»¶
4. **ä»£ç†æ”¯æŒ** - é€šè¿‡å¤šä¸ªä»£ç†è½®æ¢ä»¥æé«˜ç¨³å®šæ€§
5. **å¤–éƒ¨åŒæ­¥** - åŒæ­¥åˆ° [Gemini-Balancer](https://github.com/snailyp/gemini-balance) å’Œ [GPT-Load](https://github.com/tbphp/gpt-load)

### é«˜çº§åŠŸèƒ½

- ğŸ“ˆ æ”¯æŒæ£€æŸ¥ç‚¹çš„å¢é‡æ‰«æ
- ğŸ” å®‰å…¨çš„å‡­æ®ç®¡ç†
- ğŸ“ è¯¦ç»†çš„æ—¥å¿—è®°å½•å’ŒæŠ¥å‘Š
- ğŸš€ é›¶åœæœºéƒ¨ç½²
- ğŸ“Š æ€§èƒ½ç›‘æ§

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

> ğŸ“– **éœ€è¦å¿«é€Ÿå‘½ä»¤å‚è€ƒï¼Ÿ** æŸ¥çœ‹æˆ‘ä»¬çš„[å¿«é€Ÿå‚è€ƒæŒ‡å—](QUICK_REFERENCE.md)è·å–æ‰€æœ‰å¸¸ç”¨å‘½ä»¤å’Œæ“ä½œã€‚

### å‰ç½®è¦æ±‚

- Python 3.11 æˆ–æ›´é«˜ç‰ˆæœ¬
- Dockerï¼ˆå¯é€‰ï¼Œç”¨äºå®¹å™¨åŒ–éƒ¨ç½²ï¼‰
- GitHub ä¸ªäººè®¿é—®ä»¤ç‰Œ

### ä¸€é”®å®‰è£…

```bash
# å…‹éš†å¹¶è®¾ç½®
git clone https://github.com/yourusername/hajimi-king.git && cd hajimi-king && make setup
```

### åŸºæœ¬ä½¿ç”¨

```bash
# é…ç½®ç¯å¢ƒ
cp env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œå¡«å…¥ä½ çš„ GitHub token

# è¿è¡Œæ‰«æå™¨
python app/api_key_scanner.py
```

---

## ğŸ“¦ å®‰è£…è¯´æ˜

### æ–¹æ³• 1ï¼šæœ¬åœ°å®‰è£…

1. **å…‹éš†ä»“åº“**
   ```bash
   git clone https://github.com/yourusername/hajimi-king.git
   cd hajimi-king
   ```

2. **è®¾ç½® Python ç¯å¢ƒ**
   ```bash
   # ä½¿ç”¨ venv
   python -m venv .venv
   source .venv/bin/activate  # Windows ä¸Šä½¿ç”¨: .venv\Scripts\activate
   
   # å®‰è£…ä¾èµ–
   pip install -r requirements.txt
   ```

3. **é…ç½®ç¯å¢ƒ**
   ```bash
   cp env.example .env
   # ç¼–è¾‘ .env æ–‡ä»¶è¿›è¡Œé…ç½®
   ```

### æ–¹æ³• 2ï¼šDocker å®‰è£…

```bash
# ä½¿ç”¨ docker-compose
docker-compose up -d

# æˆ–æ‰‹åŠ¨æ„å»º
docker build -t hajimi-king:latest .
docker run -d --name hajimi-king -v ./data:/app/data hajimi-king:latest
```

### æ–¹æ³• 3ï¼šä½¿ç”¨ Makefile

```bash
# æŸ¥çœ‹å¯ç”¨å‘½ä»¤
make help

# å¿«é€Ÿè®¾ç½®å¹¶è¿è¡Œ
make build
make run
```

---

## ğŸ’» ä½¿ç”¨æ–¹æ³•

### å‘½ä»¤è¡Œç•Œé¢

```bash
# åŸºæœ¬ç”¨æ³•
python app/api_key_scanner.py

# ä½¿ç”¨è‡ªå®šä¹‰é…ç½®
python app/api_key_scanner.py --config custom.env

# è¿è¡Œç‰¹å®šæŸ¥è¯¢
python app/api_key_scanner.py --queries custom_queries.txt
```

### Python API

```python
from utils.github_client import GitHubClient
from utils.parallel_validator import ParallelKeyValidator

# åˆå§‹åŒ–å®¢æˆ·ç«¯
github = GitHubClient(tokens=['your_token'])
validator = ParallelKeyValidator(max_workers=10)

# æœç´¢å¯†é’¥
results = github.search_for_keys("AIzaSy in:file")

# éªŒè¯å¯†é’¥
valid_keys = validator.validate_batch(potential_keys)
```

### Docker å‘½ä»¤

```bash
# å¯åŠ¨æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f hajimi-king

# åœæ­¢æœåŠ¡
docker-compose down

# ä½¿ç”¨è‡ªå®šä¹‰é…ç½®è¿è¡Œ
docker run -v $(pwd)/custom.env:/app/.env hajimi-king:latest
```

---

## âš™ï¸ é…ç½®è¯¦æƒ…

### ç¯å¢ƒå˜é‡

åŸºäº `env.example` åˆ›å»º `.env` æ–‡ä»¶ï¼š

```bash
# å¿…éœ€é…ç½®
GITHUB_TOKENS=ghp_token1,ghp_token2,ghp_token3  # GitHub API ä»¤ç‰Œï¼ˆé€—å·åˆ†éš”ï¼‰

# æœç´¢é…ç½®
QUERIES_FILE=queries.txt                        # æœç´¢æŸ¥è¯¢æ–‡ä»¶
DATE_RANGE_DAYS=730                            # ä»“åº“å¹´é¾„è¿‡æ»¤ï¼ˆå¤©æ•°ï¼‰
FILE_PATH_BLACKLIST=readme,docs,test,example   # è¦è·³è¿‡çš„è·¯å¾„

# æ€§èƒ½é…ç½®
HAJIMI_MAX_WORKERS=10                          # å¹¶è¡ŒéªŒè¯çº¿ç¨‹æ•°
HAJIMI_BATCH_SIZE=10                           # æ‰¹å¤„ç†å¤§å°
HAJIMI_BATCH_INTERVAL=60                       # æ‰¹å¤„ç†é—´éš”ï¼ˆç§’ï¼‰

# ä»£ç†é…ç½®ï¼ˆå¯é€‰ï¼‰
PROXY=http://proxy1:8080,http://proxy2:8080    # ä»£ç†åˆ—è¡¨ï¼ˆé€—å·åˆ†éš”ï¼‰

# å¤–éƒ¨åŒæ­¥ï¼ˆå¯é€‰ï¼‰
GEMINI_BALANCER_SYNC_ENABLED=false             # å¯ç”¨ Gemini Balancer åŒæ­¥
GEMINI_BALANCER_URL=http://balancer:8080       # Balancer URL
GEMINI_BALANCER_AUTH=your_auth_token           # Balancer è®¤è¯ä»¤ç‰Œ

# æ•°æ®å­˜å‚¨
DATA_PATH=./data                               # æ•°æ®ç›®å½•è·¯å¾„
```

### æœç´¢æŸ¥è¯¢é…ç½®

ç¼–è¾‘ `data/queries.txt` æ¥è‡ªå®šä¹‰æœç´¢æ¨¡å¼ï¼š

```bash
# åŸºç¡€æœç´¢
AIzaSy in:file

# ç¯å¢ƒæ–‡ä»¶
AIzaSy in:file filename:.env
AIzaSy in:file filename:.env.example

# ç‰¹å®šè¯­è¨€
AIzaSy in:file extension:py "GEMINI_API_KEY"
AIzaSy in:file language:javascript filename:config.js

# é«˜çº§æ¨¡å¼
"AIzaSy" "gemini" in:file
AIzaSy in:file size:<10000
```

æŸ¥çœ‹[æŸ¥è¯¢ä¼˜åŒ–æŒ‡å—](queries_optimization_guide.md)äº†è§£é«˜çº§ç­–ç•¥ã€‚

---

## ğŸ“š API æ–‡æ¡£

### æ ¸å¿ƒæ¨¡å—

#### GitHubClient

å¤„ç† GitHub API äº¤äº’ï¼š

```python
class GitHubClient:
    def __init__(self, tokens: List[str])
    def search_for_keys(self, query: str) -> Dict[str, Any]
    def get_file_content(self, item: Dict[str, Any]) -> Optional[str]
```

#### ParallelKeyValidator

å¹¶è¡ŒéªŒè¯ API å¯†é’¥ï¼š

```python
class ParallelKeyValidator:
    def __init__(self, max_workers: int = 10)
    def validate_batch(self, keys: List[str]) -> Dict[str, ValidationResult]
    def get_stats(self) -> ValidationStats
```

#### FileManager

ç®¡ç†æ•°æ®æŒä¹…åŒ–ï¼š

```python
class FileManager:
    def __init__(self, data_dir: str)
    def save_valid_keys(self, repo: str, path: str, url: str, keys: List[str])
    def load_checkpoint(self) -> Checkpoint
    def save_checkpoint(self, checkpoint: Checkpoint)
```

å®Œæ•´çš„ API å‚è€ƒè¯·æŸ¥çœ‹ [API æ–‡æ¡£](docs/api/)ã€‚

---

## ğŸ³ Docker éƒ¨ç½²

### å¼€å‘ç¯å¢ƒ

```yaml
# docker-compose.yml
version: '3.8'
services:
  hajimi-king:
    build: .
    volumes:
      - ./data:/app/data
    env_file:
      - .env
```

### ç”Ÿäº§éƒ¨ç½²

```bash
# é›¶åœæœºéƒ¨ç½²
./deploy.sh --version v1.0.0

# æ‰‹åŠ¨è“ç»¿éƒ¨ç½²
docker-compose -f docker-compose.prod.yml up -d
```

### Docker Hub

```bash
# ä» Docker Hub æ‹‰å–
docker pull yourusername/hajimi-king:latest

# ä½¿ç”¨è‡ªå®šä¹‰é…ç½®è¿è¡Œ
docker run -d \
  --name hajimi-king \
  -v $(pwd)/data:/app/data \
  -v $(pwd)/.env:/app/.env \
  yourusername/hajimi-king:latest
```

æŸ¥çœ‹ [Docker éƒ¨ç½²æŒ‡å—](docker_deployment_guide.md) äº†è§£è¯¦ç»†è¯´æ˜ï¼Œæˆ–æŸ¥çœ‹[å¿«é€Ÿå‚è€ƒ](QUICK_REFERENCE.md#-docker-é•œåƒç®¡ç†)è·å–å¸¸ç”¨ Docker å‘½ä»¤ã€‚

---

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. æ¨¡å—å¯¼å…¥é”™è¯¯

```bash
ModuleNotFoundError: No module named 'common'
```

**è§£å†³æ–¹æ¡ˆ**ï¼šç¡®ä¿ä»é¡¹ç›®æ ¹ç›®å½•è¿è¡Œï¼š
```bash
cd /path/to/hajimi-king
python app/api_key_scanner.py  # ä½¿ç”¨æ–°çš„æ–‡ä»¶å
```

#### 2. GitHub API é€Ÿç‡é™åˆ¶

```
Error: API rate limit exceeded
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
- åœ¨ `.env` ä¸­æ·»åŠ æ›´å¤š GitHub ä»¤ç‰Œ
- å®æ–½ä»£ç†è½®æ¢
- é™ä½è¯·æ±‚é¢‘ç‡

#### 3. æƒé™è¢«æ‹’ç»

```
PermissionError: [Errno 13] Permission denied: './data'
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# ä¿®å¤æƒé™
chmod -R 755 data/
# æˆ–å¯¹äº Docker
docker exec hajimi-king chown -R appuser:appuser /app/data
```

#### 4. å†…å­˜é—®é¢˜

**è§£å†³æ–¹æ¡ˆ**ï¼šè°ƒæ•´å·¥ä½œçº¿ç¨‹æ•°å’Œæ‰¹å¤„ç†å¤§å°ï¼š
```bash
HAJIMI_MAX_WORKERS=5
HAJIMI_BATCH_SIZE=5
```

### è°ƒè¯•æ¨¡å¼

å¯ç”¨è°ƒè¯•æ—¥å¿—ï¼š
```bash
# åœ¨ .env ä¸­
LOG_LEVEL=DEBUG

# æˆ–é€šè¿‡å‘½ä»¤è¡Œ
LOG_LEVEL=DEBUG python app/api_key_scanner.py
```

### è·å–å¸®åŠ©

1. æŸ¥çœ‹ [å¸¸è§é—®é¢˜](docs/FAQ.md)
2. æœç´¢ [Issues](https://github.com/yourusername/hajimi-king/issues)
3. åŠ å…¥æˆ‘ä»¬çš„ [Discord](https://discord.gg/hajimi-king)

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿è´¡çŒ®ï¼è¯·æŸ¥çœ‹æˆ‘ä»¬çš„[è´¡çŒ®æŒ‡å—](CONTRIBUTING.md)äº†è§£è¯¦æƒ…ã€‚

### å¼€å‘è®¾ç½®

```bash
# Fork å¹¶å…‹éš†
git clone https://github.com/yourusername/hajimi-king.git
cd hajimi-king

# åˆ›å»ºåˆ†æ”¯
git checkout -b feature/amazing-feature

# å®‰è£…å¼€å‘ä¾èµ–
pip install -r requirements-dev.txt

# è¿è¡Œæµ‹è¯•
pytest tests/

# æäº¤ PR
```

### ä»£ç é£æ ¼

- éµå¾ª PEP 8
- ä½¿ç”¨ Black è¿›è¡Œæ ¼å¼åŒ–
- è¿è¡Œ Ruff è¿›è¡Œä»£ç æ£€æŸ¥
- ä¸ºæ–°åŠŸèƒ½ç¼–å†™æµ‹è¯•

---

## ğŸ“ æ›´æ–°æ—¥å¿—

### [æœªå‘å¸ƒ]
- æ•°æ®åº“æ”¯æŒå¯†é’¥å­˜å‚¨
- Web UI å¯†é’¥ç®¡ç†
- é«˜çº§åˆ†æä»ªè¡¨æ¿

### [v0.0.1-beta] - 2024-01-07
- åˆå§‹ beta ç‰ˆæœ¬å‘å¸ƒ
- å¹¶è¡ŒéªŒè¯æ”¯æŒ
- Docker éƒ¨ç½²
- å¤–éƒ¨åŒæ­¥é›†æˆ

æŸ¥çœ‹ [CHANGELOG.md](CHANGELOG.md) äº†è§£å®Œæ•´å†å²ã€‚

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

---

## ğŸ™ è‡´è°¢

- æ„Ÿè°¢æ‰€æœ‰è´¡çŒ®è€…
- å—å®‰å…¨ç ”ç©¶ç¤¾åŒºå¯å‘
- ä½¿ç”¨ Python å’Œ Docker ç”¨ â¤ï¸ æ„å»º

---

<div align="center">

**â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·åœ¨ GitHub ä¸Šç»™æˆ‘ä»¬ä¸€ä¸ªæ˜Ÿæ ‡ï¼**

[æŠ¥å‘Šé—®é¢˜](https://github.com/yourusername/hajimi-king/issues) Â· [åŠŸèƒ½è¯·æ±‚](https://github.com/yourusername/hajimi-king/issues) Â· [æ–‡æ¡£](docs/)

</div>